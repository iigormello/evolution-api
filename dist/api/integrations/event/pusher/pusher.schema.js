var y=Object.create;var o=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var P=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var U=(e,t)=>{for(var i in t)o(e,i,{get:t[i],enumerable:!0})},E=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of v(t))!I.call(e,r)&&r!==i&&o(e,r,{get:()=>t[r],enumerable:!(s=A(t,r))||s.enumerable});return e};var d=(e,t,i)=>(i=e!=null?y(P(e)):{},E(t||!e||!e.__esModule?o(i,"default",{value:e,enumerable:!0}):i,e)),f=e=>E(o({},"__esModule",{value:!0}),e);var D={};U(D,{pusherSchema:()=>_});module.exports=f(D);var T=d(require("crypto")),m=new Uint8Array(256),a=m.length;function c(){return a>m.length-16&&(T.default.randomFillSync(m),a=0),m.slice(a,a+=16)}var n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function g(e,t=0){return n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]}var h=d(require("crypto")),l={randomUUID:h.default.randomUUID};function b(e,t,i){if(l.randomUUID&&!t&&!e)return l.randomUUID();e=e||{};let s=e.random||(e.rng||c)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=s[r];return t}return g(s)}var S=b;var u=class u{constructor(t,i,s,r){this.prisma=t,this.monitor=i,this.status=s,this.name=r}set prisma(t){this.prismaRepository=t}get prisma(){return this.prismaRepository}set monitor(t){this.waMonitor=t}get monitor(){return this.waMonitor}set name(t){this.integrationName=t}get name(){return this.integrationName}set status(t){this.integrationStatus=t}get status(){return this.integrationStatus}async set(t,i){if(this.status)return i[this.name]?.enabled?i[this.name].events.length===0&&(i[this.name].events=u.events):i[this.name].events=[],this.prisma[this.name].upsert({where:{instanceId:this.monitor.waInstances[t].instanceId},update:{enabled:i[this.name]?.enabled,events:i[this.name].events},create:{enabled:i[this.name]?.enabled,events:i[this.name].events,instanceId:this.monitor.waInstances[t].instanceId}})}async get(t){if(!this.status)return;if(this.monitor.waInstances[t]===void 0)return null;let i=await this.prisma[this.name].findUnique({where:{instanceId:this.monitor.waInstances[t].instanceId}});return i||null}};u.events=["APPLICATION_STARTUP","QRCODE_UPDATED","MESSAGES_SET","MESSAGES_UPSERT","MESSAGES_EDITED","MESSAGES_UPDATE","MESSAGES_DELETE","SEND_MESSAGE","CONTACTS_SET","CONTACTS_UPSERT","CONTACTS_UPDATE","PRESENCE_UPDATE","CHATS_SET","CHATS_UPSERT","CHATS_UPDATE","CHATS_DELETE","GROUPS_UPSERT","GROUP_UPDATE","GROUP_PARTICIPANTS_UPDATE","CONNECTION_UPDATE","LABELS_EDIT","LABELS_ASSOCIATION","CALL","TYPEBOT_START","TYPEBOT_CHANGE_STATUS","REMOVE_INSTANCE","LOGOUT_INSTANCE"];var p=u;var N=(...e)=>{let t={};return e.forEach(i=>t[i]={minLength:1,description:`The "${i}" cannot be empty`}),{if:{propertyNames:{enum:[...e]}},then:{properties:t}}},_={$id:S(),type:"object",properties:{pusher:{type:"object",properties:{enabled:{type:"boolean"},appId:{type:"string"},key:{type:"string"},secret:{type:"string"},cluster:{type:"string"},useTLS:{type:"boolean"},events:{type:"array",minItems:0,items:{type:"string",enum:p.events}}},required:["enabled","appId","key","secret","cluster","useTLS"],...N("enabled","appId","key","secret","cluster","useTLS")}},required:["pusher"]};0&&(module.exports={pusherSchema});
//# sourceMappingURL=pusher.schema.js.map